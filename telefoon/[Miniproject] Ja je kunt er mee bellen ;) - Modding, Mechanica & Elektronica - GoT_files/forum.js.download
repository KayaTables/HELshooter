function ForumMainSearch(e){var o=getById("mainSearch"),r=e&&getById(e);if(o&&(addEvent(o,"submit",function(e){var t,n,a=r&&r[r.selectedIndex],i=a?a.value:"board",s=o.elements.keyword;switch(i){case"board":case"forum":return(t=o.elements["forumId[]"])&&(t.disabled="board"==i),!0;case"topic":case"poster":checkKeyword(s)?(n=a.getAttribute("data-topicid"))&&(window.location.href=jsConfig.get("board_script_url")+"/list_messages/"+n+"?data%5Bfilter_"+("topic"==i?"keywords":"userids")+"%5D="+encodeURIComponent(s.value)):s.focus()}return e.preventDefault(),!1}),window.mainSearchSuggest=new SearchSuggest("forum"),r)){var t=new FancySelect(r);window.mainSearchSuggest.addExecutionCallback(function(){return"board"==t.select.value||"forum"==t.select.value}),window.mainSearchSuggest.setAdditionalParameterCallback(function(){return"forum"==t.select.value&&o.elements["forumId[]"]?"&forumId[]="+o.elements["forumId[]"].value:""}),window.mainSearchSuggest.popupConfig.offsetLeft=-(t.element.offsetWidth+1)}}function FancySelect(e){this.select=e,this.element=null,this.currentOption=null,this.init()}function winopen(e,t,n,a,i){t=t||"_blank",n=n||460,a=a||550,"/"==e.charAt(0)&&(e=e.substr(1)),/^https?:\/\//.test(e)||(e=jsConfig.get("BaseURL")+e);var s=window.open(e,t,"toolbar=no,location=no,menubar=no,width="+n+",height="+a+",resizable=yes,status=no"+(i?","+i:""));try{s.focus()}catch(e){}}jsConfig.get("board_script_url")||jsConfig.set("board_script_url",jsConfig.get("BaseURL")+"forum"),Object.extend(FancySelect.prototype,{init:function(){this.element=document.createElement("div"),this.element.className="fancySelect";var e=document.createElement("div");this.currentOption=document.createElement("span"),this.currentOption.className="arrowDarkGreyDown",this.setCurrentOptionText(),e.appendChild(this.currentOption),addEvent(e,"click",this.toggleSelect.bind(this)),this.element.appendChild(e);for(var t,n,a=document.createElement("ul"),i=0;n=this.select.options[i];i++)(t=document.createElement("li")).innerHTML="<span>"+n.text+"</span>",addEvent(t,"click",this.selectOption.bind(this,i)),a.appendChild(t);this.element.appendChild(a),this.select.parentNode.insertBefore(this.element,this.select),this.select.style.display="none",addEvent(document,"click",this.hideSelect.bind(this))},toggleSelect:function(e){toggleClass(this.element,"dropdown")},hideSelect:function(e){e&&this.element.contains(e.target)||removeClass(this.element,"dropdown")},selectOption:function(e,t){this.select.selectedIndex=e,this.setCurrentOptionText(),this.hideSelect()},setCurrentOptionText:function(){this.currentOption.innerHTML=this.select.options[this.select.selectedIndex].text}});var EMPTY=/^\s*$/,BIRTHDAY=/^(19|20)\d{2}-(0?[1-9]|1[012])-(0?[1-9]|[12]\d|3[01])$/,NODATE=/^0*(-0*){0,2}$/,NUMBER=/^\d+$/,EMAIL=/^[\w.?&;#~=%\/-]+@[\w-]+(\.[\w-]+){1,3}$/,URL=/^https?:\/\/[^\s]+$/;function switchpage(e,t,n){var a=getSelectedValue(e);""!=a&&(window.location.href=t+"/"+a+(n||""))}function switchforum(e){switchpage(e,jsConfig.get("board_script_url")+"/list_topics")}function switchdestinationforum(e){return""!=getSelectedValue(e)}function switchquotepage(e,t){if(""!=t){var n=document.forms[e];n&&(n.elements["data[offset]"].value=t,n.elements["data[type]"].value="pagethru",n.submit())}}function switchfaqpage(e){switchpage(e,jsConfig.get("board_script_url")+"/faq")}function switchforumpage(e,t){switchpage(e,jsConfig.get("board_script_url")+"/list_topics/"+t)}function switchcontactpage(e){switchpage(e.elements["data[offset]"],jsConfig.get("board_script_url")+"/list_contacts")}function selectforum(e){for(var t=e.options.length;t--;)"switchCat"==e.options[t].id&&(e.options[t].selected=!1)}function selectfavoriteforum(e,t){var n=0,a=e.length;for(t||(t=3);a--;)"switchCat"==e.options[a].id?e.options[a].selected=!1:e.options[a].selected&&++n>t&&(e.options[a].selected=!1)}function clearforumlist(e){for(var t=e.options.length;t--;)e.options[t].selected=!1}function bookmarkCheck(e){for(var t=e.form.elements,n=t.length,a=!0;n--;)if("checkbox"==t[n].type&&"checkem"!=t[n].name&&!t.checked){a=!1;break}t.checkem.checked=a}function checkAllForId(e,t){for(var n=getById(e),a=n.form[n.name],i=a.length;i--;)"checkbox"==a[i].type&&(a[i].checked=t)}function checkDelete(e,t){for(var n=e.elements,a=n.length;a--;)if("checkbox"==n[a].type&&"checkem"!=n[a].name&&n[a].checked)return!0;return alert("Je hebt geen "+t+" geselecteerd om te verwijderen"),!1}function quote_title(e,t){window.topicname&&(40<topicname.length&&(topicname=topicname.substr(0,40)+"..."),putStr("[message="+e+"]"+(t+' in "'+topicname+'"').replace(/\[/g,"\\[")+"[/message]\n"));return!1}function quote(e){return Ajax.sendRequest(location.protocol+"//"+location.host+"/ajax/get_quote/"+e,{method:"GET",type:"json",async:!0,handler:function(e){var t=checkJsonResponse(e);t&&"message_content_quoted"in t&&putStr(t.message_content_quoted)}}),!1}function calcCharLeft_Fast(e,t,n){for(var a=e.elements[n].value,i=a.length,s=/[&<>"']/g,o=s.exec(a);null!=o;){switch(o[0]){case"&":i+=4;break;case"<":case">":i+=3;break;case'"':case"'":i+=5}o=s.exec(a)}return t<i?(e.elements[n].value=calcCharLeft_Extended(t,a),calcCharLeft_Fast(e,t,n),!1):(getById("charsleft").firstChild.nodeValue=t-i,!0)}function calcCharLeft_Extended(e,t){var n=0,a=t.length,i=0;do{switch(t.charAt(n)){case"&":i+=5;break;case"<":case">":i+=4;break;case'"':case"'":i+=6;break;default:i++}}while(i<=e&&++n<a);return t.substring(0,n)}function showtopic(e){e.match(/^[1-9]\d*$/)?window.open(jsConfig.get("board_script_url")+"/list_messages/"+e,"Topic"):alert("Het topic id is geen getal of niet ingevuld.")}function enableIds(e,t){for(var n=e.checked?"":"none",a=document.getElementsByName(t),i=a.length;i--;)a[i].parentNode.style.display=n}function collectIds(e,t){var n=e.elements["data["+t+"]"];if(n){for(var a=[],i=document.getElementsByName(t),s=i.length;s--;)i[s].checked&&a.push(i[s].value);n.value=a.join(",")}}function checkIds(e){for(var t=document.getElementsByName(e),n=t.length;n--;)t[n].checked=!0}function selectContact(e,t){var n=getSelectedValue(e),a=e.form.elements[t];if(n&&a){n.contains("'")?n='"'+n+'"':(NUMBER.test(n)||n.contains('"'))&&(n="'"+n+"'");var i=a.value?a.value.split(/\s*,\s*/):[];i.contains(n)||(i[i.length]=n,a.value=i.join(", "))}}function checkpreferencesform(e){var t=e.elements["data[customcss]"];if(t&&!EMPTY.test(t.value)&&!URL.test(t.value))return alert("Ongeldige custom stylesheet url"),t.focus(),!1;for(var n,a=0,i={};t=e.elements[a++];)if(t.name&&t.name.startsWith("data[accesskeys]")&&(n=t.value.toLowerCase()).length){if(!/^[a-z]$/.test(n))return alert('Ongeldig teken "'+n+'" voor accesskey "'+t.id+'"; alleen letters zijn toegestaan'),t.focus(),!1;if(n in i)return alert('Accesskey "'+n+'" al gebruikt voor "'+i[n]+'"; je kan niet dezelfde key aan meerdere acties toekennen'),t.focus(),!1;i[n]=t.id,t.value=n}return t=e.elements["data[limit]"],!(!NUMBER.test(t.value)||parseInt(t.value,10)<=0)||(alert("Aantal berichten per pagina moet numeriek zijn en minimaal 1"),t.focus(),!1)}function checkadminform(e,t){return e.elements["data[delete]"]&&e.elements["data[delete]"].checked&&(t||"hard"==getSelectedValue(e.elements["data[delete_action]"]))?confirm("Weet je zeker dat je "+(t?"deze alias":"het hele topic")+" wilt deleten?"):(e.elements["data[status]"]&&e.elements["data[status]"].checked&&"Closed"==getSelectedValue(e.elements["data[statusid]"])&&trackEventWt("forumtopicClosed",0,!0),!(!e.preview&&e.elements["data[content]"])||checknewmessageform(e))}function checkquickreply(e){var t=document.forms[e||"quickreply_form"];return!(t&&!EMPTY.test(t.elements["data[content]"].value))||(t.elements["data[type]"].value="preview",t.submit(),!1)}function checkedituserform(e){var t=e.elements["data[email]"];return!t||EMPTY.test(t.value)||EMAIL.test(t.value)?(t=e.elements["data[birthday]"],NODATE.test(t.value)||BIRTHDAY.test(t.value)?(t=e.elements["data[pwd]"],!EMPTY.test(t.value)||(alert("Voer je wachtwoord in ter bevestiging"),t.focus(),!1)):(alert("Ongeldig formaat voor geboortedatum"),t.focus(),!1)):(alert("Ongeldig email adres"),t.focus(),!1)}function checknewmessageform(e){if(!EMPTY.test(e.elements["data[content]"].value)){if(!(e.elements.checkimg&&!e.elements.checkimg.checked||checkImages(e)))return!1;e.preview||trackEventWt("commentAdded",0,!0)}return!0}function checknewtopicform(e){var t=e.elements["data[name]"];return EMPTY.test(t.value)?(alert("Geen titel opgegeven"),t.focus(),!1):t.value.length<10&&!confirm("Je titel is wel erg kort; weet je zeker dat je dit wilt posten?")?(t.focus(),!1):(t=e.elements["data[forumid]"])&&!getSelectedValue(t)?(alert("Je hebt geen forum gekozen"),t.focus(),!1):(t=e.elements["data[content]"],EMPTY.test(t.value)?(alert("Geen bericht opgegeven"),t.focus(),!1):!!(e.elements.checkimg&&!e.elements.checkimg.checked||checkImages(e))&&(e.preview||(t=e.elements["data[prevtopicid]"],trackEventWt(t&&t.value?"forumtopicContinued":"forumtopicAdded",0,!0)),!0))}function closeandsubmit(e){var t=e.elements["data[statusid]"];if("SELECT"==t.nodeName){for(var n=t.options.length;n--;)if("Closed"==t.options[n].value){t.selectedIndex=n;break}getById("status").checked=!0}else t.value="Closed",e.elements.action.value="frontend_admin";!(e.elements["data[type]"].value="send")!==("function"!=typeof e.onsubmit||e.onsubmit())&&e.submit()}function toggle_radio(e,t){var n=document.forms[e].elements[t];n[0].checked?n[1].checked=!0:n[0].checked=!0}function scrolltoanchor(e){e||(e=window.location.hash),""!=e&&(window.location.hash=e)}function setDefaultOption(e){for(var t=-1,n=e.options,a=0;a<n.length;a++){if("defaultSelected"==n[a].className){t=a;break}-1!=t||n[a].getAttribute("disabled")||(t=a)}-1<t?e.selectedIndex=t:e.disabled=!0}var SectionDisplayBehaviour=function(){var o=function(){var e,t,n=getCookie("klipklapcookie"),a={};if(n)for(t=(e=n.split(",")).length;t--;)a[e[t]]=1;return a}(),r=!1;return{init:function(e){var t,n,a,i,s;if(addClass(e,"pointer"),e.title="in/uitklappen","IMG"==e.nodeName)for(t=0;s=icons[t++];)if(n=e.src.indexOf(s[1]),a=e.src.indexOf(s[2]),-1<n||-1<a){i=-1<n?e.src.substr(0,n):e.src.substr(0,a),e.iconId=s[0],preload(s[0]+"Hide",i+s[1]),preload(s[0]+"Show",i+s[2]);break}e.id&&!/^(chan|m?cat)_\d+/.test(e.id)&&e.id in o!=hasClass(e,"kkRev")&&function(e){r=!0;do{if("function"==typeof e.onclick){e.onclick();break}}while(e=e.parentNode);r=!1}(e)},updateCookie:function(e,t){r||(hasClass(e,"kkRev")&&(t=!t),t?o[e.id]=1:delete o[e.id],function(){var e,t=[];for(e in o)o.hasOwnProperty(e)&&t.push(e);setCookie("klipklapcookie",t.join(","))}())}}}();function toggle_fieldsetdisplay(e){var t=TreeWalker(e).parentNode("div, fieldset");t&&(toggleClass(t,"closed"),SectionDisplayBehaviour.updateCookie(e,hasClass(t,"closed")))}function toggle_channeldisplay(e){var t=TreeWalker(e).parentNode(".forumList");t&&(toggleClass(t,"hidden"),SectionDisplayBehaviour.updateCookie(e,hasClass(t,"hidden")))}function toggle_categorydisplay(e){var t=TreeWalker(e).parentNode("table");t&&(toggleClass(t,"hidden"),SectionDisplayBehaviour.updateCookie(e,hasClass(t,"hidden")))}window.BehaviourManager&&BehaviourManager.register(".kk, .kkRev",SectionDisplayBehaviour.init);var selectionTarget=null;function initMessageBox(e,t,n){(selectionTarget=getById("messageBox"))&&(window.RmlToolBar&&(window.reactionFormToolbar=new RmlToolBar(selectionTarget,n?"none":"horizontal","nl","forum",e),window.reactionFormToolbar.setMentionHandler(new Mentions(30,t))),n||selectionTarget.focus())}!function(a,i){(a||i)&&(document.onkeydown=function(e){var t=(e=e||event).keyCode;if(a&&e.altKey&&65<=t&&t<=90){var n=String.fromCharCode(t).toLowerCase();if(n in a)return window.location.href=/^https?:\/\//.test(a[n])?a[n]:jsConfig.get("board_script_url")+a[n],cancelEvent(e)}return i&&(464864785^(i=(1<<30)-1&8*i+t)||((getById("henk")||{}).className="show")),!0})}(jsConfig.get("acckeys"),jsConfig.get("$h"));var toggle_userdata=function(){var t=null,n=!0,a=function(e){t!=this&&(i(),n&&(addEvent(document,"click",i),n=!1),t=this,addClass(t,"visible"),e.stopPropagation())},i=function(e){t&&(e&&e.target&&t.contains(e.target)&&e.target!=t||(removeClass(t,"visible"),t=null))};return function(e){(e=e||getById("content"))&&Selector(".userklipklap",e).forEach(function(e){addClass(e,"pointer"),addEvent(e,"click",a)})}}(),init_short_quotes=function(){var n=function(e){var t=Selector(".large-quote",this.parentNode)[0];t&&(toggleClass(t,"open"),toggleClass(this,"collapsed"),this.innerHTML=hasClass(this,"collapsed")?i:a)},a="toon volledige bericht",i="toon ingeklapte bericht";return function(e){(e=e||getById("content"))&&Selector(".message-quote-div",e).forEach(function(e){if(!(e.offsetHeight<300)){addClass(e,"large-quote");var t=document.createElement("span");t.className="toggle-quote",t.innerHTML=a,addEvent(t,"click",n),e.parentNode.appendChild(t)}})}}(),init_pinning=function(){var t=function(e){var t=e.target,n=this.getAttribute("data-messageid");if(n)for(;t&&t!==this;){if(hasClass(t,"pin"))return void(hasClass(this,"can_be_pinned")&&a(n,t));t=t.parentNode}},a=function(e,t){var n=hasClass(t,"pinned")?"unpin":"pin";removeClass(t.parentNode,"can_be_pinned"),Ajax.sendRequest(location.protocol+"//"+location.host+"/ajax/"+n+"_message/"+e,{method:"POST",type:"json",async:!0,appendSid:!0,handler:i.bind(this,n,t)})},i=function(e,t,n){var a=checkJsonResponse(n);a&&"message_is_pinned"in a&&("pin"===e&&a.message_is_pinned?(addClass(t,"pinned"),t.title="Unpin deze post"):(removeClass(t,"pinned"),t.title="Pin deze post"),addClass(t.parentNode,"can_be_pinned"))};return function(e){pageIsInFrame()||(e=e||getById("content"))&&Selector(".pinning",e).forEach(function(e){addEvent(e,"click",t)})}}(),init_ratings=function(){var t=function(e){var t=e.target,n=this.getAttribute("data-messageid");if(n)for(;t&&t!==this;){if(hasClass(t,"ratingcount"))return void(hasClass(this,"has_ratings")&&a(n,t));if(hasClass(t,"thumbsup"))return void(hasClass(this,"can_be_rated")&&i(n,t));t=t.parentNode}},a=function(e,t){var n=PopupGenerator.get("ratingPopup");n&&(n.visible&&n.options.getMessageId()==e?n.close(!0):(n.options.setMessageId(e),n.show(t)))},i=function(e,t){var n=hasClass(t,"rated")?"unrate":"rate";removeClass(t.parentNode,"can_be_rated"),Ajax.sendRequest(location.protocol+"//"+location.host+"/ajax/"+n+"_message/"+e,{method:"POST",type:"json",async:!0,appendSid:!0,handler:s.bind(this,n,t)})},s=function(e,t,n){var a=checkJsonResponse(n);a&&(o(TreeWalker(t).previousSibling(".ratingcount"),parseInt(a.message_rating_count,10))&&(t.title="rate"===e?(addClass(t,"rated"),"Verwijder thumbs-up"):(removeClass(t,"rated"),"Geef thumbs-up"),addClass(t.parentNode,"can_be_rated")))},o=function(e,t){return!(!e||null==t)&&(e.firstChild.nodeValue=t?"+"+t:"0",t?addClass(e.parentNode,"has_ratings"):removeClass(e.parentNode,"has_ratings"),!0)};return window.PopupGenerator&&PopupGenerator.register("ratingPopup",{offsetLeft:-45,offsetTop:6,arrow:"top",className:"dark",forceUpdate:!0,messageId:null,setMessageId:function(e){this.messageId=e},getMessageId:function(){return this.messageId},getContent:function(e){return this.sendRequest(e)},sendRequest:function(e){return Ajax.sendRequest(location.protocol+"//"+location.host+"/ajax/list_messageratings/"+this.messageId,{method:"GET",type:"json",async:!0,handler:this.handleResponse.bind(this,e)}),e.getLoadingMessage("Het overzicht wordt geladen...")},handleResponse:function(e,t){var n=checkJsonResponse(t);if(n)if(Array.isArray(n)&&n.length){e.setContent(this.createUserList(n));var a=Selector(".ratingList",e.element)[0];a&&Scrollable.create(a,{lightcolor:1,nohorizontal:1}),o(this.offsetElement,n.length)}else e.setContent("<p>Geen data gevonden...</p>");else e.close(!0)},createUserList:function(e){var t,n=[],a=0;for(n.push('<div class="ratingList"><ul>');t=e[a++];)n.push('<li><a href="'+t.rating_user_profilelink+'" target-"_blank">'+t.rating_user_nickname+"</a></li>");return n.push("</ul></div>"),n.join("")}}),function(e){pageIsInFrame()||(e=e||getById("content"))&&Selector(".rating",e).forEach(function(e){addEvent(e,"click",t)})}}(),init_qa=function(){var t=function(e){var t=this.getAttribute("data-messageid");t&&(hasClass(this,"disabled")||n(t,this))},n=function(e,t){var n=hasClass(t,"accepted")?"unaccept":"accept";addClass(t,"disabled"),Ajax.sendRequest(location.protocol+"//"+location.host+"/ajax/"+n+"_message_answer/"+e,{method:"POST",type:"json",async:!0,appendSid:!0,handler:a.bind(this,n,t)})},a=function(e,t,n){removeClass(t,"disabled");var a=checkJsonResponse(n);if(a&&a.result){Selector(".fancyButton.accepted").forEach(o),"accept"==e&&o(t);var i=Selector("h2.answer + .message")[0];i&&(i.style.opacity=".3");var s=getById("acceptedAnswerTip");s&&(s.style.display="accept"==e?"none":"")}},o=function(e){toggleClass(e,"accepted"),toggleClass(e,"green"),toggleClass(e,"darkGrey");var t=e.parentNode;do{if(hasClass(t,"message")){toggleClass(t,"bestAnswer");break}}while(t=t.parentNode)};return function(e){pageIsInFrame()||(e=e||getById("content"))&&Selector(".fancyButton.answer",e).forEach(function(e){addEvent(e,"click",t)})}}();function user_images(e,t){e&&(showwarning=!0),Selector("img.rml",t).forEach(function(e){e.getAttribute("data-lazyload")||(e.complete?scaleImage(0,e):e.onload=e.onerror=e.onabort=scaleImage)})}var showwarning=!1;function scaleImage(e,t){if(t||(t=this),t.onload=t.onerror=t.onabort=null,t.complete&&!hasClass(t,"error")){var n=0,a=0;if(t.naturalWidth)n=t.naturalWidth,a=t.naturalHeight;else{var i=new Image;i.src=t.src,n=i.width,a=i.height}if(n&&a){for(var s=t.parentNode;s&&0==s.clientWidth;)s=s.parentNode;if(s){var o,r=s.offsetWidth,l=!1;if(hasClass(s,"messagecontent"))r=s.parentNode.offsetWidth;else for(;s&&!(l=hasClass(s,"message-quote-div"));)s=s.parentNode;if(r<n&&(r-=2,t.className+=" resized",o="A"!=t.parentNode.nodeName?(t.naturalWidth||(t.naturalWidth=n),t.naturalHeight||(t.naturalHeight=a),t.className+=" pointer",t.onclick=openImage,t):t.parentNode,showwarning&&!/.svg$/i.test(t.src)&&200<t.width&&1024<n&&!l)){var c=document.createElement("div");c.className="resizewarning",c.style.width=(t.width<r?t.width:r)+2+"px",c.innerHTML='<div class="warningTxt"><small>Deze afbeelding is '+n+" * "+a+" pixels"+(t.fileSize&&0<t.fileSize?" en "+Math.floor(t.fileSize/1024)+"KB":"")+' groot. Hier op GoT verwachten we dat je <em>echte</em> thumbnails maakt.<br>Kijk in de <a href="'+jsConfig.get("board_script_url")+'/faq/forumsurvival#images" onclick="window.open(this.href);return false">faq</a> als je niet weet hoe dit moet.</small></div>',o.parentNode.insertBefore(c,o.nextSibling),c.insertBefore(o,c.firstChild)}t.width>r&&(t.height&&(t.height=Math.round(r/t.width*t.height)),t.width=r)}}}}function openImage(){winopen(jsConfig.get("board_default_template_url")+"html/showimage.html?"+encodeURIComponent(this.src),"",Math.min(this.naturalWidth,screen.availWidth),Math.min(this.naturalHeight,screen.availHeight),"scrollbars=no,left=0,top=0")}function code_tags(e){Selector("table.phphighlight",e).forEach(function(e){var t=e.rows[0],n=t.cells[t.cells.length-1].firstElementChild;if(n&&"DIV"===n.nodeName&&!(n.scrollWidth<=n.clientWidth)){var a=n.firstElementChild;if(a&&("PRE"===a.nodeName||"CODE"===a.nodeName)){var i=document.createElement("span");i.className="toggleButton",i.title="in/uitklappen",i.onclick=klipklap_code;var s=e.previousSibling.previousSibling;e.parentNode.insertBefore(i,s)}}}),Selector("div.pre, div.cmd",e).forEach(function(e){if(!(e.scrollWidth<=e.clientWidth)){var t=e.firstElementChild;if(t&&"PRE"===t.nodeName){var n=document.createElement("span");n.className="toggleButton",n.title="in/uitklappen",n.onclick=klipklap_pre,e.parentNode.insertBefore(n,e)}}})}function klipklap_code(){var e=TreeWalker(this).nextSibling("table");if(e){var t=e.rows[0],n=t.cells[t.cells.length-1].firstElementChild,a=n&&n.firstElementChild;hasClass(this,"open")?(removeClass(this,"open"),e.style.cssText="",n.style.cssText=""):(addClass(this,"open"),e.style.width="auto",n.style.overflow="visible",n.style.width=a.scrollWidth+"px")}}function klipklap_pre(){var e=this.nextElementSibling,t=e&&e.firstElementChild;t&&"PRE"===t.nodeName&&(hasClass(this,"open")?(removeClass(this,"open"),e.style.cssText=""):(addClass(this,"open"),e.style.overflow="visible",e.style.width=t.scrollWidth+4+"px"))}function spoiler_tags(e){(e=e||getById("content"))&&Selector(".spoiler",e).forEach(function(e){e.onclick=toggle_spoiler})}function toggle_spoiler(){toggleClass(this,"visible")}function more_smilies(e){var t=getById("moresmilies");t&&"none"===t.style.display&&(t.style.display="block",e.style.display="none")}function newMessageNotifier(e,i,s,o,t,n){var r=[],l=null,c=null,d=null,h=0,u=!1,g=document.title;function a(){u||(u=!0,Ajax.sendRequest(location.protocol+"//"+location.host+"/ajax/list_new_messages/"+e+"/"+i+(s?"/"+s:"")+(n?"?"+n:""),{method:"GET",type:"json",async:!0,nocache:!0,handler:f}))}function f(e){if(!1!==e)if("error"in e)p(e.error),RefreshTimer().remove("newMessageNotifier");else if("data"in e){var t=e.data,n=!1,a=0;if("lastmessageid"in t&&(i=t.lastmessageid,"messages"in t&&t.messages.length)){for(;message=t.messages[a++];)r.push(message);n=!0,"lastposterid"in t&&v(t.lastposterid==jsConfig.get("UserID")?"lastposter":"none")}"status"in t&&"Closed"==t.status&&v("closed"),n?(p(),h=0,d.interval=10):10==++h&&(d.interval=Math.min(Math.round(1.5*d.interval),30),h=0)}u=!1}function p(e){var t,n=r.length;(n||e)&&(l||((l=document.createElement("div")).id="newMessageNotification",l.onclick=m,(t=getById("newMessages"))&&t.appendChild(l)),e?(l.innerHTML=e,l.className="error"):(l.innerHTML=1==n?"Er is 1 nieuwe reactie geplaatst":"Er zijn "+n+" nieuwe reacties geplaatst",document.title="("+n+") "+g),l.style.display="block")}function m(){if(l){for(var e,t,n,a=!1;e=r.shift();)(n=document.createElement("div")).innerHTML=t=Ajax.stripScripts(e),"quote"!=s||o?l.parentNode.insertBefore(n,o?l.nextSibling:l):(a=a||n,l.parentNode.parentNode.appendChild(n)),BehaviourManager.exec(n),messageBehaviourHandler.addBehaviour(n),t!=e&&Ajax.evalScripts(e);l.style.display="none",document.title=g,a&&window.scrollTo(window.pageXOffset||(document.documentElement||document.body).scrollLeft,getOffsetTop(a))}}function v(e){var t,n='<img src="images/icons/alert.gif" alt="" height="13" width="13">';if(c=c||getById("topicStatusWarning"),"none"!=e){if(!c||"lastposter"==e){var a;if(!(a=getById("quickreply_form"))){if("lastposter"==e)return;a=getById("message_form")}if(!a)return;c||((c=document.createElement("div")).id="topicStatusWarning",c.className="topicwarning",a.insertBefore(c,a.firstChild))}switch(e){case"closed":t="Dit topic is gesloten.";break;case"lastposter":t='Je hebt zelf als laatste gereageerd in dit topic. Wil je wat toevoegen, wijzig dan bij voorkeur je <a href="'+jsConfig.get("board_script_url")+"/update_message/"+i+'/last">laatste bericht</a>.';break;default:return v("none")}c.innerHTML="<p>"+n+" <strong>"+t+"</strong> "+n+"</p>",c.style.display="block"}else c&&(c.style.display="none")}window.RefreshTimer&&(d=RefreshTimer().add("newMessageNotifier",a,t?60:10,!0))}function TopicIgnoreManager(){function t(){var e=this.href.indexOf(":")+1;Ajax.sendRequest(location.protocol+this.href.substr(e).replace("/forum/","/ajax/"),{method:"POST",type:"json",async:!0,appendSid:!0});for(var t=this.parentNode;t;){if("TR"==t.nodeName){hasClass(t,"ignored")?(removeClass(t,"ignored"),this.href=this.href.replace("/unignore_topic/","/ignore_topic/"),this.firstChild.src=getPreloadImage("icon_delete"),this.firstChild.title="verbergen"):(addClass(t,"ignored"),this.href=this.href.replace("/ignore_topic/","/unignore_topic/"),this.firstChild.src=getPreloadImage("icon_add"),this.firstChild.title="weer tonen");break}t=t.parentNode}return!1}var e=jsConfig.get("board_static_url");preload("icon_add",e+"images/icons/add.png"),preload("icon_delete",e+"images/icons/delete.png"),Selector("td.ignore").forEach(function(e){e.firstChild.onclick=t})}var messageBehaviourHandler=function(){var n=null,a=[];return{init:function(e){this.setSettings(e||{}),this.addBehaviour()},setSettings:function(e){(n=e).lazyload&&window.LazyLoadImages&&LazyLoadImages.setRmlImgOnloadFunction(scaleImage)},getSettings:function(){return n},addBehaviour:function(t){toggle_userdata(t),n&&(n.images&&user_images(n.imagewarning,t),n.code&&code_tags(t),n.spoilers&&spoiler_tags(t),n.short_quotes&&init_short_quotes(t),n.ratings&&init_ratings(t),n.pinning&&init_pinning(t),n.answers&&init_qa(t)),a.forEach(function(e){e(t)})},addHandler:function(e){a.push(e)}}}();function checkImages(n){var e=/(\\+)?\[img((\s+=?|=)(([^\]'"`]|'[^']*'|"[^"]*"|`[^`]*`)*))?\]\s*(https?:\/\/)?(.*?)\s*\[\/(img)?\]/gi,t=/\s+(\w+)(\s*=\s*(\w+|'[^']*'|"[^"]*"|`[^`]*`))?/g,a=800;function i(e){w||((w=document.createElement("pre")).className="processMessage",w.appendChild(document.createTextNode("tweakers.net:$ Plaatjes controleren...\r\n")),n.style.position="relative",n.appendChild(w),w.scrollIntoView(),addEvent(document,"keydown",s)),w.firstChild.nodeValue+=e,w.scrollTop=w.scrollHeight}function s(e){e.keyCode==keyCodes.ESC?w&&(k?(clearTimeout(k),k=null,i("\r\n\r\nVerwerking geannuleerd; druk op escape om aanpassingen ongedaan te maken of op enter om alsnog te verwerken...")):(w.parentNode.removeChild(w),w=null,selectionTarget.value=y,d(!1),removeEvent(document,"keydown",s),n=null)):e.keyCode==keyCodes.ENTER&&h()}function o(){if(!this.completed){this.completed=1;var e=m[this.matchIndex];e&&(e[6]=this.src.startsWith("https://")?"https://":"http://",this.width&&this.height?(i("\r\nPlaatje "+this.src+" ingeladen; breedte: "+this.width+", hoogte: "+this.height),e.width?e.height||(e.height=Math.round(e.width/this.width*this.height)):e.height?e.width||(e.width=Math.round(e.height/this.height*this.width)):(e.width=this.width,e.height=this.height),e.width>a&&(i("\r\nPlaatje is te breed; maximale breedte van "+a+" ingesteld!"),e.height=Math.round(a/this.width*this.height),e.width=a)):i("\r\nPlaatje "+this.src+" ingeladen, maar afmetingen konden niet worden bepaald!"),this.completed=1)}}function r(){i("\r\nPlaatje "+this.src+" kon niet geladen worden!"),this.src.startsWith("https://")?(i("\r\nProberen met http..."),this.src="http://"+m[this.matchIndex][7]):this.completed=1}function l(e){var t,n;if(e.width&&e.height){if(t=(e[1]?e[1]:"")+"[img",e[4])if("="==e[3].trim())e.attr[0]=e.width,e.attr[1]=e.height,t+="="+e.attr.join(",");else for(n in e.attr.width=e.width,e.attr.height=e.height,e.attr)Object.prototype[n]||(t+=" "+n+"="+e.attr[n]);else t+="="+e.width+","+e.height;t+="]"+e[6]+e[7]+"[/"+(e[8]||"")+"]"}else t=e[0];return t}var c=100;function d(e){for(var t=0;t<n.elements.length;t++)"submit"==n.elements[t].type&&(e&&n.elements[t].blur(),n.elements[t].disabled=e)}function h(){b&&(k&&(clearTimeout(k),k=null),d(!1),n.submit())}function u(e){return"'"!=(e=e.trim()).charAt(0)&&'"'!=e.charAt(0)||(e=e.substring(1,e.length-1)),e}var g,f,p,m=[],v=[],w=null,k=null,b=!1,C=0;if(!(selectionTarget=selectionTarget||getById("messageBox")))return!0;for(var y=selectionTarget.value;f=e.exec(y);)if(!(f[1]&&f[1].length%2)){if(f[7]=f[7].replace(/[ [\]]/g,encodeURIComponent),m[C]=f,m[C].width=0,m[C].height=0,f[4])if("="==f[3].trim())m[C].attr=[],m[C].attr=f[4].split(","),m[C].attr[0]&&(m[C].width=parseInt(u(m[C].attr[0]),10)),m[C].attr[1]&&(m[C].height=parseInt(u(m[C].attr[1]),10));else{for(m[C].attr={};p=t.exec(f[2]);)m[C].attr[p[1]]=p[3];if("nocheck"in m[C].attr)continue;m[C].attr.width&&(m[C].width=parseInt(u(m[C].attr.width),10)),m[C].attr.height&&(m[C].height=parseInt(u(m[C].attr.height),10))}C++}if(!C)return!0;for(C=g=0;f=m[C];)f.width&&f.height&&"https://"==f[6]?f.width>a&&(i("\r\nPlaatje is te breed; maximale breedte van "+a+" ingesteld!"),m[C].height=Math.round(a/f.width*f.height),m[C].width=a,v[g]={completed:1},g++):(i("\r\nDe volgende tag wordt gecontroleerd: "+f[0]),v[g]=new Image,v[g].matchIndex=C,v[g].completed=0,v[g].onload=o,v[g].onerror=r,v[g].onabort=r,v[g].src="https://"+f[7],g++),C++;return!g||(i("\r\n"),setTimeout(function e(){if(0<(c-=1)){var t=v.length;if(t){for(;t--;)if(!v[t].completed)return v[t].complete&&o.call(v[t]),void setTimeout(e,100);i("\r\n\r\nAlle plaatjes gecontroleerd; het bericht wordt aangepast..."),v=null,t=m.length;for(var n=selectionTarget.value;t--;)-1<(g=n.indexOf(m[t][0]))&&(n=n.substr(0,g)+l(m[t])+n.substr(g+m[t][0].length));selectionTarget.value=n}i("\r\n\r\nKlaar :)")}else i("\r\n\r\nMaximale tijd verstreken :(");i("\r\n\r\nJe bericht wordt binnen 3 seconden verwerkt\r\nDruk op escape om dit te annuleren of op enter om je bericht meteen te plaatsen"),b=!0,k=window.setTimeout(h,3e3)},100),d(!0),!1)}function putStr(e){window.reactionFormToolbar&&window.reactionFormToolbar.rteAction("plain",e)}function changeTopicType(n){if(n.form.className=n.form.className.replace(/topicType\d/,"topicType"+n.value),Selector(".upperlabel",n.form).forEach(function(e){var t=e.getAttribute("data-type_label_"+n.value);t&&(e.innerHTML=t)}),selectionTarget&&selectionTarget.value==selectionTarget.defaultValue){var e="data-topic_template_"+n.value;selectionTarget.hasAttribute(e)&&(selectionTarget.value=selectionTarget.getAttribute(e).replace(/\\([0nrt'/])/g,function(e){switch(e[1]){case"0":return"";case"n":return"\n";case"r":return"\r";case"t":return"\t"}return e[1]}),selectionTarget.defaultValue=selectionTarget.value)}}function getBestRatedMessages(s,e){var t=function(e){var t=checkJsonResponse(e),n=getById("bestRatedMessages"+s),a="",i=0;t?(Array.isArray(t)&&t.length?(a='<table class="rml" style="border-color:#808080" cellspacing="0" cellpadding="3" border="1"><tr><th align="right">#</th><th>Topic</th><th align="right">#thumbs</th></tr>',t.forEach(function(e){a+='<tr><td align="right">'+ ++i+'</td><td><a href="'+e.topic_listmessageslink+'" rel="external">'+e.topic_name+'</a></td><td align="right">'+e.topic_rating_count+"</td></tr>"}),a+="</table>"):a="<p>Geen topics gevonden...</p>",n.innerHTML=a,removeClass(n,"loading")):n&&n.parentNode.removeChild(n)};document.write('<div id="bestRatedMessages'+s+'" class="loading"></div>'),Ajax.sendRequest(location.protocol+"//"+location.host+"/ajax/list_best_rated_topics/"+s+(e?"/"+e:""),{method:"GET",type:"json",async:!0,handler:t})}